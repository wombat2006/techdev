# TechSapo åŸºæœ¬è¨­è¨ˆæ›¸ - è©³ç´°ç‰ˆ

<div style="page-break-after: always;"></div>

## ğŸ“‹ ç›®æ¬¡

1. [ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦](#1-ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦)
2. [ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆ](#2-ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆ)
3. [ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆåŸå‰‡](#3-ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆåŸå‰‡)
4. [æ©Ÿèƒ½è¨­è¨ˆ](#4-æ©Ÿèƒ½è¨­è¨ˆ)
5. [ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆ](#5-ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆ)
6. [ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ](#6-ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ)
7. [ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ](#7-ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ)
8. [é‹ç”¨ãƒ»ç›£è¦–è¨­è¨ˆ](#8-é‹ç”¨ç›£è¦–è¨­è¨ˆ)
9. [ãƒ†ã‚¹ãƒˆæˆ¦ç•¥](#9-ãƒ†ã‚¹ãƒˆæˆ¦ç•¥)
10. [ä»Šå¾Œã®ç™ºå±•è¨ˆç”»](#10-ä»Šå¾Œã®ç™ºå±•è¨ˆç”»)

<div style="page-break-after: always;"></div>

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### 1.1 ã‚·ã‚¹ãƒ†ãƒ ç›®çš„

TechSapoã¯ã€è¤‡æ•°ã®LLMï¼ˆLarge Language Modelï¼‰ã‚’æ´»ç”¨ã—ãŸ**ã€ŒWall-Bounceã€æŠ€è¡“**ã«ã‚ˆã‚Šã€é«˜å“è³ªã§ä¿¡é ¼æ€§ã®é«˜ã„ITæŠ€è¡“ã‚µãƒãƒ¼ãƒˆã‚’æä¾›ã™ã‚‹æ¬¡ä¸–ä»£ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚

```mermaid
graph LR
    A[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æŠ€è¡“çš„èª²é¡Œ] --> B[TechSapo Platform]
    B --> C[AIåˆ†æãƒ»è§£æ±ºç­–æç¤º]
    C --> D[é«˜å“è³ªãªè§£æ±ºç­–]
    
    B --> E[Wall-Bounceåˆ†æ]
    B --> F[RAGçŸ¥è­˜ãƒ™ãƒ¼ã‚¹]
    B --> G[ãƒ­ã‚°åˆ†æã‚¨ãƒ³ã‚¸ãƒ³]
    
    style A fill:#e1f5fe
    style D fill:#c8e6c9
    style B fill:#fff3e0
```

### 1.2 ã‚·ã‚¹ãƒ†ãƒ ã®ç‰¹å¾´

#### ğŸ“ Core Features Overview

```mermaid
mindmap
  root((TechSapo Core))
    Wall-Bounceåˆ†æ
      è¤‡æ•°LLMã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
      ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹å½¢æˆ
      å“è³ªä¿è¨¼ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 
    çŸ¥è­˜ãƒ™ãƒ¼ã‚¹çµ±åˆ
      Google Drive RAG
      Vector Search
      ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ
    ç›£è¦–ãƒ»é‹ç”¨
      Prometheus Metrics
      Grafana Dashboard
      ã‚¢ãƒ©ãƒ¼ãƒˆæ©Ÿèƒ½
    ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
      API Keyç®¡ç†
      ãƒ¬ãƒ¼ãƒˆåˆ¶é™
      æš—å·åŒ–é€šä¿¡
```

### 1.3 å¯¾è±¡ãƒ¦ãƒ¼ã‚¶ãƒ¼

| ãƒ¦ãƒ¼ã‚¶ãƒ¼ç¨®åˆ¥ | åˆ©ç”¨ã‚·ãƒ¼ãƒŠãƒªã‚ª | ä¸»è¦æ©Ÿèƒ½ |
|-------------|--------------|---------|
| **ITæŠ€è¡“è€…ãƒ»ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢** | æŠ€è¡“çš„å•é¡Œè§£æ±ºã€è¨­è¨ˆãƒ¬ãƒ“ãƒ¥ãƒ¼ | Wall-Bounceåˆ†æã€RAGæ¤œç´¢ |
| **ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…** | éšœå®³å¯¾å¿œã€ãƒ­ã‚°è§£æ | ãƒ­ã‚°åˆ†æã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦– |
| **æŠ€è¡“ã‚µãƒãƒ¼ãƒˆæ‹…å½“è€…** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚µãƒãƒ¼ãƒˆã€FAQå¯¾å¿œ | çŸ¥è­˜ãƒ™ãƒ¼ã‚¹æ¤œç´¢ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç† |
| **é–‹ç™ºãƒãƒ¼ãƒ ** | ã‚³ãƒ¼ãƒ‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ã€æŠ€è¡“èª¿æŸ» | Wall-Bounceåˆ†æã€APIçµ±åˆ |

### 1.4 ã‚·ã‚¹ãƒ†ãƒ ä¾¡å€¤ææ¡ˆ

```mermaid
graph TD
    A[å¾“æ¥ã®å•é¡Œ] --> A1[å˜ä¸€AIãƒ¢ãƒ‡ãƒ«ã®é™ç•Œ]
    A --> A2[çŸ¥è­˜ã®åˆ†æ•£ãƒ»æ–­ç‰‡åŒ–]
    A --> A3[æ‰‹å‹•åˆ†æã®æ™‚é–“ã‚³ã‚¹ãƒˆ]
    
    B[TechSapoã«ã‚ˆã‚‹è§£æ±º] --> B1[è¤‡æ•°AIãƒ¢ãƒ‡ãƒ«å”èª¿]
    B --> B2[çµ±åˆçŸ¥è­˜ãƒ™ãƒ¼ã‚¹]
    B --> B3[è‡ªå‹•åŒ–ãƒ»åŠ¹ç‡åŒ–]
    
    B1 --> C[é«˜å“è³ªãƒ»é«˜ä¿¡é ¼æ€§]
    B2 --> C
    B3 --> C
    
    style A fill:#ffcdd2
    style B fill:#c8e6c9
    style C fill:#fff3e0
```

<div style="page-break-after: always;"></div>

## 2. ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆ

### 2.1 ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³

```mermaid
graph TB
    subgraph "Frontend Layer"
        UI[Web UI<br/>SPA Application<br/>ğŸ–¥ï¸ HTML5 + JS]
        Mobile[Mobile Interface<br/>Progressive Web App<br/>ğŸ“± PWA]
    end

    subgraph "API Gateway Layer"
        Gateway[Express.js API Gateway<br/>ğŸ›¡ï¸ Security & Rate Limiting<br/>ğŸ“Š Request/Response Logging]
    end

    subgraph "Core Services Layer"
        WB[Wall-Bounce Analyzer<br/>ğŸ¤– Multi-LLM Orchestration<br/>âš–ï¸ Consensus Engine]
        RAG[RAG Service<br/>ğŸ“š Knowledge Base Search<br/>ğŸ” Vector Similarity]
        LOG[Log Analyzer<br/>ğŸ”§ Intelligent Diagnostics<br/>ğŸ“ˆ Pattern Recognition]
        SESSION[Session Manager<br/>ğŸ’¾ State Management<br/>ğŸ•’ Lifecycle Control]
    end

    subgraph "Data Layer"
        Redis[(Redis Cache<br/>âš¡ Session Store<br/>ğŸ”„ Real-time Data)]
        Vector[(Vector Store<br/>ğŸ“„ Document Embeddings<br/>ğŸ§  Semantic Search)]
        Config[(Configuration<br/>âš™ï¸ Environment Vars<br/>ğŸ”’ Secure Storage)]
    end

    subgraph "External Integrations"
        Gemini[Gemini CLI<br/>ğŸŸ¢ 2.5 Pro/Flash<br/>ğŸ“Š Cost: $0.002/1K]
        OpenAI[OpenAI Codex<br/>ğŸ”µ GPT-5<br/>ğŸ’° Cost: $0.03/1K]
        Anthropic[Anthropic Claude<br/>ğŸŸ£ Opus 4.1/Sonnet 4<br/>ğŸ’ Premium Tier]
        Drive[Google Drive<br/>â˜ï¸ Knowledge Base<br/>ğŸ“ Document Storage]
    end

    UI --> Gateway
    Mobile --> Gateway
    Gateway --> WB
    Gateway --> RAG
    Gateway --> LOG
    Gateway --> SESSION

    WB --> Redis
    RAG --> Redis
    LOG --> Redis
    SESSION --> Redis

    RAG --> Vector
    SESSION --> Config

    WB --> Gemini
    WB --> OpenAI
    WB --> Anthropic
    RAG --> Drive

    style UI fill:#e3f2fd
    style Mobile fill:#e3f2fd
    style Gateway fill:#fff3e0
    style WB fill:#f3e5f5
    style RAG fill:#e8f5e8
    style LOG fill:#fff8e1
    style SESSION fill:#fce4ec
```

### 2.2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯è©³ç´°

#### FrontendæŠ€è¡“æ§‹æˆ

```mermaid
graph LR
    subgraph "Frontend Stack"
        A[HTML5 Semantic] --> B[CSS3 Grid/Flexbox]
        B --> C[Vanilla JavaScript ES2022]
        C --> D[Server-Sent Events]
        D --> E[Progressive Web App]
    end
    
    subgraph "UI Components"
        F[Font Awesome 6.4.0] --> G[Noto Sans JP]
        G --> H[Responsive Design]
        H --> I[Dark/Light Theme]
    end
    
    subgraph "Performance"
        J[Code Splitting] --> K[Lazy Loading]
        K --> L[Service Worker]
        L --> M[Offline Support]
    end
```

#### BackendæŠ€è¡“æ§‹æˆ

```mermaid
graph TB
    subgraph "Runtime Environment"
        A[Node.js 18+] --> B[TypeScript ES2022]
        B --> C[CommonJS Modules]
    end
    
    subgraph "Framework & Libraries"
        D[Express.js 4.x] --> E[Helmet.js Security]
        E --> F[CORS Policy]
        F --> G[Winston Logging]
    end
    
    subgraph "Data & Cache"
        H[Redis 7.x] --> I[ioredis Client]
        I --> J[TTL Management]
        J --> K[Cluster Support]
    end
    
    subgraph "Process Management"
        L[PM2 Cluster] --> M[Auto Restart]
        M --> N[Load Balancing]
        N --> O[Health Monitoring]
    end
```

### 2.3 ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯æ§‹æˆå›³

```mermaid
graph TB
    subgraph "External Users"
        U1[Web Users] 
        U2[API Clients]
        U3[Mobile Users]
    end
    
    subgraph "Load Balancer"
        LB[Nginx<br/>SSL Termination<br/>Rate Limiting]
    end
    
    subgraph "Application Tier"
        APP1[TechSapo Instance 1<br/>Port: 4000]
        APP2[TechSapo Instance 2<br/>Port: 4001] 
        APP3[Wall-Bounce Server<br/>Port: 4002]
    end
    
    subgraph "Cache Tier"
        R1[Redis Primary<br/>Port: 6379]
        R2[Redis Replica<br/>Port: 6380]
    end
    
    subgraph "External Services"
        EX1[Google APIs<br/>Drive + Gemini]
        EX2[OpenAI Codex<br/>GPT-5]
        EX3[Anthropic<br/>Claude API]
    end
    
    U1 --> LB
    U2 --> LB  
    U3 --> LB
    
    LB --> APP1
    LB --> APP2
    LB --> APP3
    
    APP1 --> R1
    APP2 --> R1
    APP3 --> R1
    R1 --> R2
    
    APP1 --> EX1
    APP2 --> EX2
    APP3 --> EX3
```

<div style="page-break-after: always;"></div>

## 3. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆåŸå‰‡

### 3.1 Wall-Bounceå¿…é ˆåŸå‰‡

```mermaid
flowchart TD
    A[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¯ã‚¨ãƒª] --> B{2ä»¥ä¸Šã®LLMãƒ¢ãƒ‡ãƒ«<br/>åˆ©ç”¨å¯èƒ½ï¼Ÿ}
    B -->|No| C[ã‚¨ãƒ©ãƒ¼: æœ€å°è¦ä»¶æœªæº€]
    B -->|Yes| D[Wall-Bounceé–‹å§‹]
    
    D --> E[LLM Provider 1]
    D --> F[LLM Provider 2] 
    D --> G[LLM Provider 3<br/>ã‚ªãƒ—ã‚·ãƒ§ãƒ³]
    
    E --> H[Response 1]
    F --> I[Response 2]
    G --> J[Response 3]
    
    H --> K[Consensus Analysis]
    I --> K
    J --> K
    
    K --> L{Confidence â‰¥ 0.7<br/>AND<br/>Consensus â‰¥ 0.6?}
    L -->|No| M[è¿½åŠ Providerå‘¼ã³å‡ºã—]
    L -->|Yes| N[çµ±åˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ]
    
    M --> O[Provider 4]
    O --> P[Response 4]
    P --> K
    
    N --> Q[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸è¿”ç­”]
    
    style A fill:#e1f5fe
    style N fill:#c8e6c9
    style Q fill:#c8e6c9
    style C fill:#ffcdd2
```

### 3.2 ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼åˆ¶ç´„ãƒ»ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«

```mermaid
graph TB
    subgraph "Provider Constraints"
        A[OpenAI] --> A1[âŒ ç›´æ¥APIä½¿ç”¨ç¦æ­¢]
        A --> A2[âœ… CodexçµŒç”±ã®ã¿]
        A --> A3[ğŸ’° ã‚³ã‚¹ãƒˆ: $0.03/1K tokens]
        
        B[Anthropic] --> B1[âŒ API_KEYä½¿ç”¨ç¦æ­¢]
        B --> B2[âœ… Claude Codeç›´æ¥ã®ã¿]
        B --> B3[ğŸ’ Premium Tier]
        
        C[Google] --> C1[âŒ API_KEYä½¿ç”¨ç¦æ­¢]
        C --> C2[âœ… Gemini CLIçµŒç”±ã®ã¿]
        C --> C3[ğŸ’š ã‚³ã‚¹ãƒˆåŠ¹ç‡æœ€é«˜]
    end
    
    subgraph "Quality Gates"
        D[Confidence Threshold] --> D1[â‰¥ 0.7 å¿…é ˆ]
        E[Consensus Threshold] --> E1[â‰¥ 0.6 å¿…é ˆ]
        F[Timeout Control] --> F1[è¨­å®šãƒ™ãƒ¼ã‚¹åˆ¶å¾¡]
    end
    
    style A1 fill:#ffcdd2
    style B1 fill:#ffcdd2
    style C1 fill:#ffcdd2
    style A2 fill:#c8e6c9
    style B2 fill:#c8e6c9
    style C2 fill:#c8e6c9
```

### 3.3 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‘ã‚¿ãƒ¼ãƒ³

#### ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph TB
    subgraph "Layered Architecture"
        P[Presentation Layer<br/>ğŸ–¥ï¸ UI/API Endpoints]
        A[Application Layer<br/>ğŸ”§ Business Logic & Orchestration]
        D[Domain Layer<br/>ğŸ“‹ Core Models & Rules]
        I[Infrastructure Layer<br/>ğŸ”Œ External Services & Data]
    end
    
    P --> A
    A --> D
    D --> I
    
    subgraph "Cross-Cutting Concerns"
        S[Security<br/>ğŸ›¡ï¸ Authentication & Authorization]
        L[Logging<br/>ğŸ“ Structured Logging]
        M[Monitoring<br/>ğŸ“Š Metrics & Health Checks]
        C[Caching<br/>âš¡ Redis-based Performance]
    end
    
    S -.-> P
    S -.-> A
    L -.-> P
    L -.-> A
    L -.-> D
    L -.-> I
    M -.-> P
    M -.-> A
    C -.-> A
    C -.-> I
```

#### ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹æŒ‡å‘è¨­è¨ˆ

```mermaid
graph LR
    subgraph "Service Boundaries"
        WBS[Wall-Bounce Service<br/>ğŸ¤– ç‹¬ç«‹ã—ãŸLLMã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³]
        RAGS[RAG Service<br/>ğŸ“š çŸ¥è­˜ãƒ™ãƒ¼ã‚¹ç®¡ç†]
        LOGS[Log Analysis Service<br/>ğŸ” ãƒ­ã‚°è§£æå°‚é–€]
        SESS[Session Service<br/>ğŸ‘¤ ãƒ¦ãƒ¼ã‚¶ãƒ¼çŠ¶æ…‹ç®¡ç†]
    end
    
    subgraph "API-First Design"
        API[Unified API Gateway<br/>ğŸ“¡ çµ±ä¸€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹]
    end
    
    subgraph "Shared Infrastructure"
        CACHE[Redis Cache<br/>âš¡ å…±æœ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥]
        LOG[Central Logging<br/>ğŸ“ é›†ç´„ãƒ­ã‚°]
        MON[Monitoring<br/>ğŸ“Š çµ±åˆç›£è¦–]
    end
    
    API --> WBS
    API --> RAGS
    API --> LOGS
    API --> SESS
    
    WBS --> CACHE
    RAGS --> CACHE
    LOGS --> CACHE
    SESS --> CACHE
    
    WBS --> LOG
    RAGS --> LOG
    LOGS --> LOG
    SESS --> LOG
    
    WBS --> MON
    RAGS --> MON
    LOGS --> MON
    SESS --> MON
```

<div style="page-break-after: always;"></div>

## 4. æ©Ÿèƒ½è¨­è¨ˆ

### 4.1 ä¸»è¦æ©Ÿèƒ½ãƒãƒƒãƒ—

```mermaid
mindmap
  root((TechSapo æ©Ÿèƒ½))
    Wall-Bounceåˆ†æ
      ä¸¦åˆ—å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰
        è¤‡æ•°ProvideråŒæ™‚å®Ÿè¡Œ
        ãƒ¬ã‚¹ãƒãƒ³ã‚¹çµ±åˆ
      é †æ¬¡å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰
        é †ç•ªå®Ÿè¡Œ
        å“è³ªå‘ä¸Š
      ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹åˆ†æ
        ä¿¡é ¼åº¦è¨ˆç®—
        åˆæ„ã‚¹ã‚³ã‚¢ç®—å‡º
      å“è³ªä¿è¨¼
        é–¾å€¤ãƒã‚§ãƒƒã‚¯
        ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
    ãƒ­ã‚°è§£æ
      ãƒ‘ã‚¿ãƒ¼ãƒ³èªè­˜
        dependency
        configuration
        network
        permission
        resource
      è§£æ±ºç­–æç¤º
        æ®µéšçš„æ‰‹é †
        é‡è¦åº¦è©•ä¾¡
        äºˆé˜²ç­–
    RAGæ¤œç´¢
      Vector Search
        åŸ‹ã‚è¾¼ã¿ç”Ÿæˆ
        é¡ä¼¼åº¦è¨ˆç®—
      ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†
        Google DriveåŒæœŸ
        ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†
      æ¤œç´¢æœ€é©åŒ–
        ã‚¯ã‚¨ãƒªæœ€é©åŒ–
        çµæœãƒ©ãƒ³ã‚­ãƒ³ã‚°
    ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
      çŠ¶æ…‹ç®¡ç†
        Redis backed
        TTLåˆ¶å¾¡
      å±¥æ­´ç®¡ç†
        ä¼šè©±å±¥æ­´
        åˆ†æå±¥æ­´
      ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
        è­˜åˆ¥å­ç®¡ç†
        è¨­å®šä¿æŒ
```

### 4.2 Wall-Bounceåˆ†ææ©Ÿèƒ½è©³ç´°

#### å‡¦ç†ãƒ•ãƒ­ãƒ¼å›³

```mermaid
sequenceDiagram
    participant User as ğŸ‘¤ User
    participant API as ğŸŒ API Gateway
    participant WB as ğŸ¤– Wall-Bounce Analyzer
    participant G as ğŸŸ¢ Gemini CLI
    participant O as ğŸ”µ OpenAI Codex
    participant A as ğŸŸ£ Anthropic Claude
    participant R as âš¡ Redis Cache

    User->>API: POST /api/v1/generate
    Note over User,API: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ + ã‚ªãƒ—ã‚·ãƒ§ãƒ³
    
    API->>API: å…¥åŠ›æ¤œè¨¼ & ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒã‚§ãƒƒã‚¯
    API->>WB: executeWallBounce(prompt, options)
    
    WB->>R: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç¢ºèª
    alt ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ
        R-->>WB: cached result
        WB-->>API: return cached response
    else ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒŸã‚¹
        
        par ä¸¦åˆ—å®Ÿè¡Œ (Parallel Mode)
            WB->>G: CLIå®Ÿè¡Œ (Pro/Flash)
            WB->>O: Codexå‘¼ã³å‡ºã—
        end
        
        WB->>A: å†…éƒ¨APIå‘¼ã³å‡ºã—
        
        G-->>WB: Response 1 (confidence: 0.85)
        O-->>WB: Response 2 (confidence: 0.92)
        A-->>WB: Response 3 (confidence: 0.88)
        
        WB->>WB: ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹åˆ†æ
        Note over WB: ä¿¡é ¼åº¦: 0.88, åˆæ„: 0.91
        
        alt å“è³ªé–¾å€¤OK
            WB->>WB: çµ±åˆãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ
            WB->>R: çµæœã‚­ãƒ£ãƒƒã‚·ãƒ¥ (TTL: 300s)
            WB-->>API: Wall-Bounceçµæœ
        else å“è³ªé–¾å€¤NG
            WB->>WB: è¿½åŠ Providerå®Ÿè¡Œ
            Note over WB: Provider 4ã‚’å‘¼ã³å‡ºã—
        end
    end
    
    API-->>User: çµ±åˆã•ã‚ŒãŸé«˜å“è³ªå›ç­”
```

#### ã‚³ãƒ³ã‚»ãƒ³ã‚µã‚¹åˆ†æã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

```mermaid
flowchart TD
    A[è¤‡æ•°LLMãƒ¬ã‚¹ãƒãƒ³ã‚¹] --> B[ãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£æ]
    B --> C[ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æŠ½å‡º]
    B --> D[ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯é¡ä¼¼åº¦]
    B --> E[æ§‹é€ çš„é¡ä¼¼åº¦]
    
    C --> F[é‡è¤‡åº¦è¨ˆç®—]
    D --> G[æ„å‘³çš„åˆæ„åº¦]
    E --> H[å½¢å¼çš„ä¸€è²«æ€§]
    
    F --> I[çµ±åˆã‚¹ã‚³ã‚¢ç®—å‡º]
    G --> I
    H --> I
    
    I --> J{ã‚¹ã‚³ã‚¢ â‰¥ 0.6ï¼Ÿ}
    J -->|Yes| K[é«˜å“è³ªçµ±åˆãƒ¬ã‚¹ãƒãƒ³ã‚¹]
    J -->|No| L[è¿½åŠ Providerå®Ÿè¡Œ]
    
    L --> M[Provider 4]
    M --> N[æ–°ã—ã„ãƒ¬ã‚¹ãƒãƒ³ã‚¹]
    N --> B
    
    style K fill:#c8e6c9
    style L fill:#fff3e0
```

### 4.3 ãƒ­ã‚°åˆ†ææ©Ÿèƒ½è©³ç´°

#### åˆ†æãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```mermaid
flowchart LR
    subgraph "å…¥åŠ›å‡¦ç†"
        A[ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒãƒ³ãƒ‰] --> B[ã‚¨ãƒ©ãƒ¼å‡ºåŠ›]
        B --> C[ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ]
    end
    
    subgraph "å‰å‡¦ç†"
        C --> D[ãƒ­ã‚°æ­£è¦åŒ–]
        D --> E[ãƒ‘ã‚¿ãƒ¼ãƒ³æŠ½å‡º]
        E --> F[ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ç‰¹å®š]
    end
    
    subgraph "AIåˆ†æ"
        F --> G[Wall-Bounceåˆ†æ]
        G --> H[å•é¡Œã‚«ãƒ†ã‚´ãƒªåˆ†é¡]
        H --> I[æ ¹æœ¬åŸå› ç‰¹å®š]
    end
    
    subgraph "è§£æ±ºç­–ç”Ÿæˆ"
        I --> J[æ®µéšçš„æ‰‹é †ä½œæˆ]
        J --> K[é‡è¦åº¦è©•ä¾¡]
        K --> L[äºˆé˜²ç­–æç¤º]
    end
    
    subgraph "å‡ºåŠ›"
        L --> M[æ§‹é€ åŒ–ãƒ¬ã‚¹ãƒãƒ³ã‚¹]
        M --> N[ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¯èƒ½ãªæ‰‹é †]
    end
```

#### å•é¡Œåˆ†é¡ãƒãƒˆãƒªã‚¯ã‚¹

```mermaid
graph TB
    subgraph "Problem Categories"
        A[dependency<br/>ä¾å­˜é–¢ä¿‚å•é¡Œ<br/>ğŸ“¦]
        B[configuration<br/>è¨­å®šå•é¡Œ<br/>âš™ï¸]
        C[network<br/>ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å•é¡Œ<br/>ğŸŒ]
        D[permission<br/>æ¨©é™å•é¡Œ<br/>ğŸ”’]
        E[resource<br/>ãƒªã‚½ãƒ¼ã‚¹å•é¡Œ<br/>ğŸ’¾]
        F[unknown<br/>æœªåˆ†é¡å•é¡Œ<br/>â“]
    end
    
    subgraph "Severity Levels"
        S1[Low<br/>è»½å¾®<br/>ğŸŸ¢]
        S2[Medium<br/>ä¸­ç¨‹åº¦<br/>ğŸŸ¡]
        S3[High<br/>é‡å¤§<br/>ğŸ”´]
    end
    
    subgraph "Resolution Time"
        T1[< 30åˆ†<br/>å³åº§å¯¾å¿œ]
        T2[30åˆ†-2æ™‚é–“<br/>çŸ­æœŸå¯¾å¿œ]
        T3[> 2æ™‚é–“<br/>é•·æœŸå¯¾å¿œ]
    end
    
    A --> S1
    A --> S2
    B --> S2
    B --> S3
    C --> S1
    C --> S3
    D --> S2
    D --> S3
    E --> S3
    F --> S1
    F --> S2
    F --> S3
```

### 4.4 RAGæ¤œç´¢æ©Ÿèƒ½è©³ç´°

#### ãƒ™ã‚¯ãƒˆãƒ«æ¤œç´¢ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```mermaid
flowchart TD
    subgraph "ã‚¯ã‚¨ãƒªå‡¦ç†"
        A[è‡ªç„¶è¨€èªã‚¯ã‚¨ãƒª] --> B[ã‚¯ã‚¨ãƒªæ­£è¦åŒ–]
        B --> C[ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ‹¡å¼µ]
        C --> D[åŸ‹ã‚è¾¼ã¿ç”Ÿæˆ]
    end
    
    subgraph "ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç®¡ç†"
        E[Google Drive] --> F[ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒæœŸ]
        F --> G[ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º]
        G --> H[ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²]
        H --> I[åŸ‹ã‚è¾¼ã¿ç”Ÿæˆ]
        I --> J[Vector Storeä¿å­˜]
    end
    
    subgraph "æ¤œç´¢å®Ÿè¡Œ"
        D --> K[é¡ä¼¼åº¦è¨ˆç®—]
        K --> L[Vector Storeæ¤œç´¢]
        L --> M[çµæœãƒ©ãƒ³ã‚­ãƒ³ã‚°]
    end
    
    subgraph "çµæœå‡¦ç†"
        M --> N[ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ä»˜åŠ ]
        N --> O[ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ‹¡å¼µ]
        O --> P[ãƒ¬ã‚¹ãƒãƒ³ã‚¹ç”Ÿæˆ]
    end
    
    J --> L
```

#### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒæœŸãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant GD as â˜ï¸ Google Drive
    participant WH as ğŸ”” Webhook Handler  
    participant RAG as ğŸ“š RAG Connector
    participant VS as ğŸ§  Vector Store
    participant R as âš¡ Redis

    Note over GD,R: è‡ªå‹•åŒæœŸãƒ•ãƒ­ãƒ¼
    
    GD->>WH: ãƒ•ã‚¡ã‚¤ãƒ«å¤‰æ›´é€šçŸ¥
    WH->>WH: å¤‰æ›´ã‚¿ã‚¤ãƒ—åˆ¤å®š
    
    alt ãƒ•ã‚¡ã‚¤ãƒ«è¿½åŠ /æ›´æ–°
        WH->>RAG: syncDocument(fileId)
        RAG->>GD: ãƒ•ã‚¡ã‚¤ãƒ«å–å¾—
        RAG->>RAG: ãƒ†ã‚­ã‚¹ãƒˆæŠ½å‡º & ãƒãƒ£ãƒ³ã‚¯åˆ†å‰²
        RAG->>VS: åŸ‹ã‚è¾¼ã¿ç”Ÿæˆ & ä¿å­˜
        RAG->>R: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚­ãƒ£ãƒƒã‚·ãƒ¥
    else ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
        WH->>VS: deleteDocument(fileId)
        WH->>R: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢
    end
    
    RAG-->>WH: åŒæœŸå®Œäº†
    WH-->>GD: ACK
    
    Note over GD,R: æ‰‹å‹•åŒæœŸãƒ•ãƒ­ãƒ¼
    
    participant U as ğŸ‘¤ User
    U->>RAG: POST /api/v1/rag/sync
    RAG->>GD: ãƒ•ã‚©ãƒ«ãƒ€ãƒ¼ä¸€è¦§å–å¾—
    
    loop å„ãƒ•ã‚¡ã‚¤ãƒ«
        RAG->>GD: ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹å–å¾—
        RAG->>VS: åŸ‹ã‚è¾¼ã¿æ›´æ–°
        RAG->>R: ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿æ›´æ–°
    end
    
    RAG-->>U: åŒæœŸãƒ¬ãƒãƒ¼ãƒˆ
```

<div style="page-break-after: always;"></div>

## 5. ãƒ‡ãƒ¼ã‚¿è¨­è¨ˆ

### 5.1 ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼æ¦‚è¦

```mermaid
flowchart LR
    subgraph "Input Sources"
        UI[Web UI<br/>ğŸ‘¤ User Input]
        API[API Clients<br/>ğŸ”Œ External Apps]
        WH[Webhooks<br/>ğŸ”” External Events]
    end
    
    subgraph "Processing Layer"
        VAL[Input Validation<br/>âœ… Schema Check]
        AUTH[Authentication<br/>ğŸ” Security Layer]
        RATE[Rate Limiting<br/>ğŸš¦ Traffic Control]
    end
    
    subgraph "Business Logic"
        WB[Wall-Bounce<br/>ğŸ¤– AI Processing]
        RAG[RAG Search<br/>ğŸ“š Knowledge Retrieval] 
        LOG[Log Analysis<br/>ğŸ” Problem Diagnosis]
        SESS[Session Mgmt<br/>ğŸ‘¤ State Management]
    end
    
    subgraph "Data Storage"
        REDIS[(Redis<br/>âš¡ Cache & Sessions)]
        VECTOR[(Vector Store<br/>ğŸ§  Embeddings)]
        CONFIG[(Config Store<br/>âš™ï¸ Environment)]
    end
    
    subgraph "External APIs"
        GEMINI[Gemini CLI<br/>ğŸŸ¢ Google AI]
        OPENAI[OpenAI Codex<br/>ğŸ”µ GPT Models]
        CLAUDE[Claude API<br/>ğŸŸ£ Anthropic]
        DRIVE[Google Drive<br/>â˜ï¸ Documents]
    end
    
    UI --> VAL
    API --> VAL
    WH --> VAL
    
    VAL --> AUTH
    AUTH --> RATE
    
    RATE --> WB
    RATE --> RAG
    RATE --> LOG
    RATE --> SESS
    
    WB --> REDIS
    RAG --> REDIS
    LOG --> REDIS
    SESS --> REDIS
    
    RAG --> VECTOR
    SESS --> CONFIG
    
    WB --> GEMINI
    WB --> OPENAI
    WB --> CLAUDE
    RAG --> DRIVE
```

### 5.2 Redis ãƒ‡ãƒ¼ã‚¿æ§‹é€ è©³ç´°

#### ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†ã‚¹ã‚­ãƒ¼ãƒ

```mermaid
erDiagram
    SESSION_DATA {
        string session_id PK
        string user_id FK
        timestamp created_at
        timestamp last_accessed
        timestamp expires_at
        json session_data
        string session_name
        enum status "active|inactive|expired"
        number request_count
        json preferences
    }
    
    USER_SESSIONS {
        string user_id PK
        set active_sessions
        number total_sessions
        timestamp last_login
        json user_preferences
    }
    
    SESSION_HISTORY {
        string session_id PK
        string user_id FK
        array conversation_history
        array analysis_history
        timestamp archived_at
        json metadata
    }
    
    SESSION_DATA ||--o{ SESSION_HISTORY : "has"
    SESSION_DATA }o--|| USER_SESSIONS : "belongs_to"
```

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç®¡ç†ã‚¹ã‚­ãƒ¼ãƒ

```mermaid
erDiagram
    WALL_BOUNCE_CACHE {
        string prompt_hash PK
        json result
        number confidence
        number consensus_score
        array providers_used
        timestamp created_at
        timestamp expires_at
        number access_count
    }
    
    RAG_CACHE {
        string query_hash PK
        json search_results
        array document_ids
        number total_documents
        timestamp created_at
        timestamp expires_at
        string embedding_model
    }
    
    CONTEXT7_CACHE {
        string library_key PK
        json documentation
        string version
        timestamp created_at
        timestamp expires_at
        number tokens_used
    }
    
    METRICS_CACHE {
        string metric_key PK
        json realtime_data
        timestamp updated_at
        number requests_count
        number active_sessions
        number response_time_avg
    }
```

#### Vector Store ãƒãƒƒãƒ”ãƒ³ã‚°

```mermaid
erDiagram
    DRIVE_VECTOR_MAPPING {
        string drive_file_id PK
        string vector_store_file_id UK
        string file_name
        number file_size
        string file_type
        timestamp created_at
        timestamp updated_at
        string folder_path
        json metadata
    }
    
    DOCUMENT_CHUNKS {
        string chunk_id PK
        string drive_file_id FK
        string content
        number chunk_index
        array embedding_vector
        json chunk_metadata
        timestamp created_at
    }
    
    SEARCH_INDEX {
        string keyword PK
        array document_ids
        array chunk_ids
        number frequency
        timestamp last_updated
    }
    
    DRIVE_VECTOR_MAPPING ||--o{ DOCUMENT_CHUNKS : "contains"
    DOCUMENT_CHUNKS }o--|| SEARCH_INDEX : "indexed_by"
```

### 5.3 è¨­å®šç®¡ç†è©³ç´°

#### ç’°å¢ƒå¤‰æ•°æ§‹æˆå›³

```mermaid
graph TB
    subgraph "Configuration Hierarchy"
        A[Environment Variables<br/>ğŸ”§ System Level]
        B[Config Files<br/>ğŸ“ Application Level]
        C[Redis Config<br/>âš¡ Runtime Level]
        D[Default Values<br/>ğŸ›¡ï¸ Fallback Level]
    end
    
    subgraph "Config Categories"
        E[Server Config<br/>ğŸŒ Port, Host, Environment]
        F[LLM Provider Config<br/>ğŸ¤– API Keys, Endpoints]
        G[Database Config<br/>ğŸ’¾ Redis, Vector Store]
        H[Security Config<br/>ğŸ”’ Auth, Rate Limits]
        I[Feature Flags<br/>ğŸš© A/B Testing]
    end
    
    A --> E
    A --> F
    A --> G
    A --> H
    
    B --> E
    B --> I
    
    C --> H
    C --> I
    
    D --> E
    D --> F
    D --> G
    D --> H
    D --> I
```

#### è¨­å®šæ¤œè¨¼ãƒ•ãƒ­ãƒ¼

```mermaid
flowchart TD
    A[ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•] --> B[ç’°å¢ƒå¤‰æ•°èª­ã¿è¾¼ã¿]
    B --> C[ã‚¹ã‚­ãƒ¼ãƒæ¤œè¨¼]
    C --> D{å¿…é ˆé …ç›®ãƒã‚§ãƒƒã‚¯}
    D -->|Missing| E[ã‚¨ãƒ©ãƒ¼: è¨­å®šä¸è¶³]
    D -->|OK| F[å‹å¤‰æ› & æ­£è¦åŒ–]
    F --> G[ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤é©ç”¨]
    G --> H[ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯]
    H --> I{æ•´åˆæ€§ç¢ºèª}
    I -->|Invalid| J[è­¦å‘Š: è¨­å®šä¸æ•´åˆ]
    I -->|Valid| K[è¨­å®šå®Œäº†]
    
    E --> L[ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³çµ‚äº†]
    J --> M[ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å€¤ä½¿ç”¨]
    M --> K
    K --> N[ã‚µãƒ¼ãƒ“ã‚¹é–‹å§‹]
    
    style E fill:#ffcdd2
    style J fill:#fff3e0
    style K fill:#c8e6c9
```

<div style="page-break-after: always;"></div>

## 6. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### 6.1 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å±¤æ§‹æˆ

```mermaid
graph TB
    subgraph "Defense in Depth"
        L1[Network Security<br/>ğŸŒ Firewall, DDoS Protection]
        L2[Application Security<br/>ğŸ›¡ï¸ Input Validation, HTTPS]
        L3[Authentication & Authorization<br/>ğŸ” JWT, RBAC]
        L4[Data Security<br/>ğŸ”’ Encryption, Masking]
        L5[Infrastructure Security<br/>ğŸ—ï¸ Container, OS Hardening]
    end
    
    subgraph "Security Controls"
        SC1[Rate Limiting<br/>ğŸš¦ API Throttling]
        SC2[Input Sanitization<br/>ğŸ§¹ XSS/SQLi Prevention]
        SC3[Secret Management<br/>ğŸ—ï¸ API Key Protection]
        SC4[Audit Logging<br/>ğŸ“ Security Events]
        SC5[Monitoring<br/>ğŸ‘ï¸ Threat Detection]
    end
    
    L1 --> SC1
    L2 --> SC2
    L3 --> SC3
    L4 --> SC4
    L5 --> SC5
```

### 6.2 API Keyç®¡ç†æˆ¦ç•¥

```mermaid
flowchart LR
    subgraph "Provider Security Model"
        A[Gemini] --> A1[âŒ API_KEYé™¤å»æ¸ˆã¿]
        A --> A2[âœ… CLIèªè¨¼ã®ã¿]
        A --> A3[ğŸ”’ ç’°å¢ƒåˆ†é›¢]
        
        B[OpenAI] --> B1[âŒ ç›´æ¥APIç¦æ­¢]
        B --> B2[âœ… Codex Proxy]
        B --> B3[ğŸ”‘ Tokenç®¡ç†]
        
        C[Anthropic] --> C1[âŒ API_KEYä½¿ç”¨ç¦æ­¢]
        C --> C2[âœ… å†…éƒ¨SDKå°‚ç”¨]
        C --> C3[ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ã‚¢ãƒ©ã‚¤ãƒ³]
    end
    
    subgraph "Key Lifecycle"
        D[ç”Ÿæˆ] --> E[é…å¸ƒ]
        E --> F[ä½¿ç”¨]
        F --> G[ç›£è¦–]
        G --> H[ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³]
        H --> I[ç„¡åŠ¹åŒ–]
    end
    
    subgraph "Access Control"
        J[RBAC<br/>Role-Based Access]
        K[Principle of Least Privilege]
        L[Audit Trail]
    end
```

### 6.3 èªè¨¼ãƒ»èªå¯ãƒ•ãƒ­ãƒ¼

```mermaid
sequenceDiagram
    participant C as ğŸ‘¤ Client
    participant G as ğŸŒ API Gateway
    participant A as ğŸ” Auth Service
    participant R as âš¡ Redis
    participant S as ğŸ”§ Service

    Note over C,S: èªè¨¼ãƒ•ãƒ­ãƒ¼
    
    C->>G: Request with credentials
    G->>A: Validate credentials
    A->>R: Check user session
    
    alt Valid credentials
        A->>A: Generate JWT token
        A->>R: Store session
        A-->>G: Token + permissions
        G-->>C: Authenticated response
    else Invalid credentials
        A-->>G: 401 Unauthorized
        G-->>C: Authentication failed
    end
    
    Note over C,S: èªå¯ãƒ•ãƒ­ãƒ¼
    
    C->>G: API request with token
    G->>G: Validate JWT signature
    G->>A: Check permissions
    A->>R: Verify session active
    
    alt Authorized
        G->>S: Forward request
        S-->>G: Service response
        G-->>C: Authorized response
    else Unauthorized
        G-->>C: 403 Forbidden
    end
    
    Note over C,S: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
    
    loop Session monitoring
        A->>R: Update last_accessed
        A->>A: Check session expiry
        A->>R: Cleanup expired sessions
    end
```

### 6.4 ãƒ¬ãƒ¼ãƒˆåˆ¶é™ãƒ»DDoSå¯¾ç­–

```mermaid
graph TB
    subgraph "Rate Limiting Layers"
        L1[Global Rate Limit<br/>ğŸŒ Server-wide Protection]
        L2[IP-based Rate Limit<br/>ğŸ  Per-IP Throttling]
        L3[User-based Rate Limit<br/>ğŸ‘¤ Per-User Quotas]
        L4[Endpoint-specific Limit<br/>ğŸ¯ API-specific Rules]
    end
    
    subgraph "Detection & Response"
        D1[Pattern Analysis<br/>ğŸ“Š Anomaly Detection]
        D2[Threshold Monitoring<br/>âš ï¸ Alert Triggers]
        D3[Automatic Blocking<br/>ğŸš« IP Blacklisting]
        D4[Graceful Degradation<br/>â¬‡ï¸ Service Throttling]
    end
    
    subgraph "Rate Limit Matrix"
        RL1[/api/v1/generate<br/>10 req/min per IP]
        RL2[/api/v1/analyze-logs<br/>20 req/min per IP]
        RL3[/api/v1/rag/search<br/>30 req/min per IP]
        RL4[/health<br/>Unlimited]
    end
    
    L1 --> D1
    L2 --> D2
    L3 --> D3
    L4 --> D4
```

### 6.5 ãƒ‡ãƒ¼ã‚¿ä¿è­·ãƒ»ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼

```mermaid
flowchart TD
    subgraph "Data Classification"
        A[Public Data<br/>ğŸŒ Documentation]
        B[Internal Data<br/>ğŸ¢ Logs, Metrics]
        C[Confidential Data<br/>ğŸ”’ User Sessions]
        D[Restricted Data<br/>ğŸš¨ API Keys, Secrets]
    end
    
    subgraph "Protection Mechanisms"
        E[Encryption at Rest<br/>ğŸ’¾ AES-256]
        F[Encryption in Transit<br/>ğŸ”„ TLS 1.3]
        G[Data Masking<br/>ğŸ­ PII Protection]
        H[Access Logging<br/>ğŸ“ Audit Trail]
    end
    
    subgraph "Compliance"
        I[GDPR<br/>ğŸ‡ªğŸ‡º EU Privacy]
        J[CCPA<br/>ğŸ‡ºğŸ‡¸ CA Privacy]
        K[SOC 2<br/>ğŸ›ï¸ Security Framework]
        L[ISO 27001<br/>ğŸ“‹ Security Standards]
    end
    
    A --> E
    B --> E
    C --> E
    C --> F
    D --> F
    D --> G
    
    C --> H
    D --> H
    
    E --> I
    F --> J
    G --> K
    H --> L
```

<div style="page-break-after: always;"></div>

## 7. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ

### 7.1 æ€§èƒ½è¦ä»¶ãƒãƒˆãƒªã‚¯ã‚¹

```mermaid
graph TB
    subgraph "Performance Targets"
        A[Wall-Bounce Response<br/>â±ï¸ < 60 seconds<br/>ğŸ¯ Target: 45s]
        B[Log Analysis<br/>â±ï¸ < 30 seconds<br/>ğŸ¯ Target: 20s]
        C[RAG Search<br/>â±ï¸ < 10 seconds<br/>ğŸ¯ Target: 5s]
        D[Health Check<br/>â±ï¸ < 1 second<br/>ğŸ¯ Target: 200ms]
    end
    
    subgraph "Scalability Targets"
        E[Concurrent Users<br/>ğŸ‘¥ 100 active<br/>ğŸ“ˆ Peak: 200]
        F[Requests per Minute<br/>ğŸ“Š 1000 RPM<br/>ğŸš€ Burst: 2000]
        G[Cache Hit Rate<br/>âš¡ > 80%<br/>ğŸ† Target: 90%]
        H[System Uptime<br/>ğŸ”„ 99.9%<br/>ğŸ’¯ Target: 99.95%]
    end
    
    subgraph "Resource Limits"
        I[Memory Usage<br/>ğŸ’¾ < 2GB per instance<br/>âš ï¸ Alert: 1.5GB]
        J[CPU Usage<br/>ğŸ”¥ < 80% average<br/>ğŸš¨ Alert: 90%]
        K[Disk I/O<br/>ğŸ’¿ < 100 IOPS<br/>ğŸ“ˆ Monitor: 80]
        L[Network I/O<br/>ğŸŒ < 100 Mbps<br/>ğŸ“Š Monitor: 80]
    end
```

### 7.2 æœ€é©åŒ–æˆ¦ç•¥

#### ä¸¦åˆ—å‡¦ç†æœ€é©åŒ–

```mermaid
flowchart LR
    subgraph "Wall-Bounce Parallelization"
        A[User Request] --> B[Load Balancer]
        B --> C[Provider Pool]
        
        C --> D[Gemini CLI]
        C --> E[OpenAI Codex]
        C --> F[Anthropic Claude]
        
        D --> G[Response 1]
        E --> H[Response 2]
        F --> I[Response 3]
        
        G --> J[Consensus Engine]
        H --> J
        I --> J
        
        J --> K[Unified Response]
    end
    
    subgraph "Optimization Techniques"
        L[Connection Pooling<br/>ğŸ”„ Reuse Connections]
        M[Request Batching<br/>ğŸ“¦ Group Similar Requests]
        N[Async Processing<br/>âš¡ Non-blocking I/O]
        O[Streaming Responses<br/>ğŸŒŠ Real-time Results]
    end
```

#### ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥éšå±¤

```mermaid
graph TB
    subgraph "Cache Hierarchy"
        L1[L1: Application Cache<br/>âš¡ In-Memory (Node.js)<br/>TTL: 60s, Size: 100MB]
        L2[L2: Redis Cache<br/>ğŸ”„ Distributed Cache<br/>TTL: 300s, Size: 1GB]
        L3[L3: CDN Cache<br/>ğŸŒ Edge Caching<br/>TTL: 3600s, Global]
        L4[L4: Database<br/>ğŸ’¾ Persistent Storage<br/>æ°¸ç¶šåŒ–ãƒ‡ãƒ¼ã‚¿]
    end
    
    subgraph "Cache Patterns"
        P1[Cache-Aside<br/>ğŸ‘ï¸ Lazy Loading]
        P2[Write-Through<br/>âœï¸ Immediate Consistency]
        P3[Write-Behind<br/>â° Deferred Writes]
        P4[Refresh-Ahead<br/>ğŸ”„ Proactive Updates]
    end
    
    subgraph "Cache Keys"
        K1[wall_bounce:{hash}<br/>ğŸ¤– AI Responses]
        K2[rag_search:{query_hash}<br/>ğŸ“š Search Results]
        K3[context7:{library_key}<br/>ğŸ“– Documentation]
        K4[sessions:{session_id}<br/>ğŸ‘¤ User Sessions]
    end
    
    L1 --> P1
    L2 --> P2
    L3 --> P3
    L4 --> P4
```

### 7.3 ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ãƒ»ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

#### æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°è¨­è¨ˆ

```mermaid
graph TB
    subgraph "Load Balancer Tier"
        LB[Nginx Load Balancer<br/>âš–ï¸ Round Robin + Health Check]
    end
    
    subgraph "Application Tier"
        APP1[TechSapo Instance 1<br/>ğŸ“Š Port 4000]
        APP2[TechSapo Instance 2<br/>ğŸ“Š Port 4001]
        APP3[TechSapo Instance 3<br/>ğŸ“Š Port 4002]
        APPN[TechSapo Instance N<br/>ğŸ“Š Port 400N]
    end
    
    subgraph "Shared Services"
        REDIS[Redis Cluster<br/>âš¡ Shared Cache & Sessions]
        VECTOR[Vector Store<br/>ğŸ§  Shared Knowledge Base]
        METRICS[Metrics Store<br/>ğŸ“Š Shared Monitoring]
    end
    
    subgraph "Auto-Scaling Rules"
        CPU[CPU > 80% for 5min<br/>â†’ Scale Up]
        MEM[Memory > 85% for 3min<br/>â†’ Scale Up]
        RPS[RPS > 80% capacity<br/>â†’ Scale Up]
        IDLE[Low utilization for 15min<br/>â†’ Scale Down]
    end
    
    LB --> APP1
    LB --> APP2
    LB --> APP3
    LB --> APPN
    
    APP1 --> REDIS
    APP2 --> REDIS
    APP3 --> REDIS
    APPN --> REDIS
    
    APP1 --> VECTOR
    APP2 --> VECTOR
    APP3 --> VECTOR
    APPN --> VECTOR
```

#### ãƒªã‚½ãƒ¼ã‚¹ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ

```mermaid
flowchart TD
    subgraph "Monitoring Metrics"
        A[System Metrics<br/>ğŸ’» CPU, Memory, Disk]
        B[Application Metrics<br/>ğŸ“Š Requests, Response Time]
        C[Business Metrics<br/>ğŸ’¼ Wall-Bounce Success Rate]
        D[External Metrics<br/>ğŸŒ Provider Response Time]
    end
    
    subgraph "Alert Conditions"
        E[Critical<br/>ğŸš¨ Service Down<br/>Response < 5min]
        F[Warning<br/>âš ï¸ Performance Degraded<br/>Response < 30min]
        G[Info<br/>â„¹ï¸ Capacity Planning<br/>Daily Report]
    end
    
    subgraph "Response Actions"
        H[Auto-Scaling<br/>ğŸ”„ Instance Management]
        I[Circuit Breaker<br/>âš¡ Failure Isolation]
        J[Graceful Degradation<br/>â¬‡ï¸ Feature Limiting]
        K[Alerting<br/>ğŸ“¢ Team Notification]
    end
    
    A --> E
    A --> F
    B --> E
    B --> F
    C --> F
    C --> G
    D --> F
    
    E --> H
    E --> I
    E --> K
    F --> J
    F --> K
    G --> K
```

<div style="page-break-after: always;"></div>

## 8. é‹ç”¨ãƒ»ç›£è¦–è¨­è¨ˆ

### 8.1 ç›£è¦–ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```mermaid
graph TB
    subgraph "Application Layer"
        APP1[TechSapo Instance 1]
        APP2[TechSapo Instance 2]
        APP3[TechSapo Instance 3]
    end
    
    subgraph "Metrics Collection"
        PROM[Prometheus<br/>ğŸ“Š Time Series DB<br/>Port: 9090]
        NODE[Node Exporter<br/>ğŸ’» System Metrics<br/>Port: 9100]
        REDIS_EXP[Redis Exporter<br/>âš¡ Cache Metrics<br/>Port: 9121]
    end
    
    subgraph "Visualization"
        GRAFANA[Grafana<br/>ğŸ“ˆ Dashboards<br/>Port: 3000]
        ALERT[AlertManager<br/>ğŸš¨ Notifications<br/>Port: 9093]
    end
    
    subgraph "Log Management"
        WINSTON[Winston Logger<br/>ğŸ“ Structured Logs]
        LOG_AGG[Log Aggregator<br/>ğŸ” Centralized Logging]
    end
    
    subgraph "External Monitoring"
        UPTIMEROBOT[UptimeRobot<br/>ğŸŒ External Health Check]
        PINGDOM[Pingdom<br/>â±ï¸ Performance Monitoring]
    end
    
    APP1 --> PROM
    APP2 --> PROM
    APP3 --> PROM
    
    PROM --> GRAFANA
    PROM --> ALERT
    
    APP1 --> WINSTON
    APP2 --> WINSTON
    APP3 --> WINSTON
    WINSTON --> LOG_AGG
    
    NODE --> PROM
    REDIS_EXP --> PROM
```

### 8.2 ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è¨­è¨ˆ

#### ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

```mermaid
graph TB
    subgraph "System Overview Dashboard"
        A[Service Health<br/>ğŸŸ¢ All Services Operational]
        B[Request Rate<br/>ğŸ“Š 1,247 RPM]
        C[Response Time<br/>â±ï¸ 245ms P95]
        D[Error Rate<br/>ğŸš¨ 0.02%]
    end
    
    subgraph "Wall-Bounce Metrics"
        E[Success Rate<br/>âœ… 94.3%]
        F[Consensus Score<br/>ğŸ¤ 0.87 avg]
        G[Provider Health<br/>ğŸŸ¢ Gemini âœ… OpenAI âœ… Claude]
        H[Cost Tracking<br/>ğŸ’° $42.15 / $70 budget]
    end
    
    subgraph "Infrastructure Metrics"
        I[CPU Usage<br/>ğŸ”¥ 45% avg]
        J[Memory Usage<br/>ğŸ’¾ 1.2GB / 2GB]
        K[Cache Hit Rate<br/>âš¡ 89.2%]
        L[Redis Connections<br/>ğŸ”„ 23 active]
    end
    
    subgraph "Business Metrics"
        M[Active Sessions<br/>ğŸ‘¥ 42 users]
        N[Daily Queries<br/>ğŸ“ˆ 2,847 queries]
        O[User Satisfaction<br/>â­ 4.7/5.0]
        P[Feature Usage<br/>ğŸ“Š Wall-Bounce: 78%, RAG: 22%]
    end
```

#### Wall-Bounceå°‚ç”¨ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

```mermaid
graph TB
    subgraph "Provider Performance"
        A[Gemini 2.5 Pro<br/>â±ï¸ 12.3s avg<br/>âœ… 97.2% success]
        B[Gemini 2.5 Flash<br/>â±ï¸ 3.1s avg<br/>âœ… 98.1% success]
        C[OpenAI Codex<br/>â±ï¸ 18.7s avg<br/>âœ… 91.5% success]
        D[Anthropic Claude<br/>â±ï¸ 8.9s avg<br/>âœ… 95.8% success]
    end
    
    subgraph "Quality Metrics"
        E[Confidence Distribution<br/>ğŸ“Š 0.7-0.8: 15%, 0.8-0.9: 45%, 0.9-1.0: 40%]
        F[Consensus Trends<br/>ğŸ“ˆ Last 24h: 0.89 avg]
        G[Failed Analyses<br/>ğŸš¨ 3 failures / 847 total]
        H[Retry Patterns<br/>ğŸ”„ 2.3% require extra provider]
    end
    
    subgraph "Cost Analysis"
        I[Token Usage<br/>ğŸ“ 1.2M tokens today]
        J[Cost per Query<br/>ğŸ’° $0.048 avg]
        K[Provider Cost Breakdown<br/>ğŸ“Š Gemini: 45%, OpenAI: 35%, Claude: 20%]
        L[Budget Projection<br/>ğŸ“ˆ On track: $58/$70 monthly]
    end
```

### 8.3 ãƒ­ã‚°ç®¡ç†æˆ¦ç•¥

#### æ§‹é€ åŒ–ãƒ­ã‚°ã‚¹ã‚­ãƒ¼ãƒ

```mermaid
graph LR
    subgraph "Log Levels"
        A[ERROR<br/>ğŸ”´ ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼]
        B[WARN<br/>ğŸŸ¡ æ³¨æ„äº‹é …]
        C[INFO<br/>ğŸ”µ é€šå¸¸å‹•ä½œ]
        D[DEBUG<br/>âšª è©³ç´°æƒ…å ±]
    end
    
    subgraph "Log Categories"
        E[Request Logs<br/>ğŸ“ APIå‘¼ã³å‡ºã—]
        F[Performance Logs<br/>â±ï¸ å¿œç­”æ™‚é–“]
        G[Security Logs<br/>ğŸ”’ èªè¨¼ãƒ»èªå¯]
        H[Business Logs<br/>ğŸ’¼ Wall-Bounceå®Ÿè¡Œ]
    end
    
    subgraph "Log Destinations"
        I[Console<br/>ğŸ–¥ï¸ é–‹ç™ºç’°å¢ƒ]
        J[File<br/>ğŸ“ ãƒ­ãƒ¼ã‚«ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«]
        K[External<br/>ğŸŒ ãƒ­ã‚°é›†ç´„ã‚µãƒ¼ãƒ“ã‚¹]
        L[Database<br/>ğŸ’¾ æ¤œç´¢å¯èƒ½ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸]
    end
```

#### ãƒ­ã‚°è§£æãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```mermaid
flowchart LR
    subgraph "Log Sources"
        A[Application Logs<br/>ğŸ“± TechSapo Services]
        B[System Logs<br/>ğŸ’» OS & Infrastructure] 
        C[Access Logs<br/>ğŸŒ Nginx/Load Balancer]
        D[Security Logs<br/>ğŸ”’ Auth & Rate Limiting]
    end
    
    subgraph "Processing"
        E[Log Parser<br/>ğŸ“Š Structure Extraction]
        F[Filter & Transform<br/>ğŸ”„ Data Normalization]
        G[Enrichment<br/>â• Context Addition]
        H[Correlation<br/>ğŸ”— Event Linking]
    end
    
    subgraph "Storage & Analysis"
        I[Search Index<br/>ğŸ” Full-text Search]
        J[Time Series<br/>ğŸ“ˆ Metrics Extraction]
        K[Alert Rules<br/>ğŸš¨ Anomaly Detection]
        L[Retention Policy<br/>ğŸ—„ï¸ Data Lifecycle]
    end
    
    A --> E
    B --> E
    C --> E
    D --> E
    
    E --> F
    F --> G
    G --> H
    
    H --> I
    H --> J
    H --> K
    H --> L
```

### 8.4 ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ãƒ»SLI/SLO

#### ã‚µãƒ¼ãƒ“ã‚¹ãƒ¬ãƒ™ãƒ«æŒ‡æ¨™ (SLI)

```mermaid
graph TB
    subgraph "Availability SLI"
        A[System Uptime<br/>ğŸ”„ 99.95% target<br/>43m 48s downtime/month max]
        B[API Success Rate<br/>âœ… 99.9% target<br/>0.1% error rate max]
        C[Health Check<br/>ğŸ’“ 100% target<br/>All endpoints responsive]
    end
    
    subgraph "Performance SLI"
        D[Response Time<br/>â±ï¸ P95 < 60s for Wall-Bounce<br/>P95 < 10s for RAG]
        E[Throughput<br/>ğŸ“Š 1000 RPM capacity<br/>Burst to 2000 RPM]
        F[Cache Performance<br/>âš¡ 90% hit rate target<br/>< 1ms cache access]
    end
    
    subgraph "Quality SLI"
        G[Wall-Bounce Quality<br/>ğŸ¯ Confidence â‰¥ 0.7<br/>Consensus â‰¥ 0.6]
        H[RAG Relevance<br/>ğŸ“š User satisfaction â‰¥ 4.5/5<br/>Result accuracy > 85%]
        I[Cost Efficiency<br/>ğŸ’° < $70/month<br/>< $0.05 per query]
    end
```

#### ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯éšå±¤

```mermaid
flowchart TD
    subgraph "Health Check Levels"
        L1[L1: Basic Health<br/>ğŸŸ¢ Service Running<br/>GET /health]
        L2[L2: Dependencies<br/>ğŸ”„ External Services<br/>GET /api/v1/health]
        L3[L3: End-to-End<br/>ğŸ¯ Full Workflow<br/>Synthetic Tests]
        L4[L4: Business Logic<br/>ğŸ’¼ Feature Validation<br/>Wall-Bounce Test]
    end
    
    subgraph "Check Frequency"
        F1[Every 30s<br/>â° Basic Health]
        F2[Every 2min<br/>â° Dependencies]
        F3[Every 10min<br/>â° End-to-End]
        F4[Every 1hour<br/>â° Business Logic]
    end
    
    subgraph "Failure Actions"
        A1[Alert<br/>ğŸš¨ Immediate notification]
        A2[Auto-Restart<br/>ğŸ”„ Service recovery]
        A3[Circuit Breaker<br/>âš¡ Traffic redirection]
        A4[Graceful Degradation<br/>â¬‡ï¸ Feature disable]
    end
    
    L1 --> F1
    L2 --> F2
    L3 --> F3
    L4 --> F4
    
    F1 --> A1
    F2 --> A2
    F3 --> A3
    F4 --> A4
```

<div style="page-break-after: always;"></div>

## 9. ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 9.1 ãƒ†ã‚¹ãƒˆãƒ”ãƒ©ãƒŸãƒƒãƒ‰

```mermaid
graph TB
    subgraph "Test Pyramid"
        A[E2E Tests<br/>ğŸŒ Browser Automation<br/>User Journey Validation<br/>~5% of total tests]
        B[Integration Tests<br/>ğŸ”— API & Service Integration<br/>External Dependencies<br/>~15% of total tests]
        C[Unit Tests<br/>âš™ï¸ Component Testing<br/>Business Logic Validation<br/>~80% of total tests]
    end
    
    subgraph "Test Categories"
        D[Functional Tests<br/>âœ… Feature Behavior]
        E[Performance Tests<br/>â±ï¸ Load & Stress]
        F[Security Tests<br/>ğŸ”’ Vulnerability Scanning]
        G[Compatibility Tests<br/>ğŸ”„ Browser & Device]
    end
    
    subgraph "Test Environments"
        H[Local Dev<br/>ğŸ’» Developer Machine]
        I[CI/CD<br/>ğŸ¤– Automated Pipeline]
        J[Staging<br/>ğŸ­ Pre-production]
        K[Production<br/>ğŸš€ Live Monitoring]
    end
    
    A --> D
    B --> D
    C --> D
    
    D --> H
    E --> I
    F --> J
    G --> K
```

### 9.2 Wall-Bounceæ©Ÿèƒ½ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

#### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¨­è¨ˆ

```mermaid
flowchart TD
    subgraph "Happy Path Tests"
        A[æ­£å¸¸ç³»: åŸºæœ¬æ©Ÿèƒ½<br/>âœ… 3ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼æˆåŠŸ]
        B[æ­£å¸¸ç³»: é«˜å“è³ªå›ç­”<br/>âœ… ä¿¡é ¼åº¦0.9+, åˆæ„0.8+]
        C[æ­£å¸¸ç³»: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ’ãƒƒãƒˆ<br/>âš¡ åŒä¸€ã‚¯ã‚¨ãƒªã®é«˜é€Ÿå¿œç­”]
    end
    
    subgraph "Error Handling Tests"
        D[ç•°å¸¸ç³»: ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼éšœå®³<br/>ğŸš¨ 1ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼å¤±æ•—æ™‚]
        E[ç•°å¸¸ç³»: ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ<br/>â° 60ç§’åˆ¶é™è¶…é]
        F[ç•°å¸¸ç³»: å“è³ªé–¾å€¤æœªé”<br/>âš ï¸ ä¿¡é ¼åº¦0.6ä»¥ä¸‹]
    end
    
    subgraph "Edge Case Tests"
        G[å¢ƒç•Œå€¤: æœ€å°ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼<br/>âš–ï¸ 2ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã®ã¿]
        H[å¢ƒç•Œå€¤: æœ€å¤§ãƒˆãƒ¼ã‚¯ãƒ³<br/>ğŸ“ åˆ¶é™å€¤è¿‘æ¥]
        I[å¢ƒç•Œå€¤: è¤‡é›‘ãªã‚¯ã‚¨ãƒª<br/>ğŸ§© ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«å…¥åŠ›]
    end
    
    subgraph "Performance Tests"
        J[è² è·ãƒ†ã‚¹ãƒˆ: åŒæ™‚å®Ÿè¡Œ<br/>âš¡ 100ä¸¦åˆ—ãƒªã‚¯ã‚¨ã‚¹ãƒˆ]
        K[è² è·ãƒ†ã‚¹ãƒˆ: ç¶™ç¶šå®Ÿè¡Œ<br/>ğŸ”„ 1æ™‚é–“é€£ç¶šå®Ÿè¡Œ]
        L[ã‚¹ãƒˆãƒ¬ã‚¹ãƒ†ã‚¹ãƒˆ: é™ç•Œæ€§èƒ½<br/>ğŸš€ ã‚·ã‚¹ãƒ†ãƒ é™ç•Œæ¸¬å®š]
    end
```

#### ãƒ¢ãƒƒã‚¯ãƒ»ã‚¹ã‚¿ãƒ–æˆ¦ç•¥

```mermaid
graph LR
    subgraph "External Dependencies"
        A[Gemini CLI<br/>ğŸŸ¢ Google AI]
        B[OpenAI Codex<br/>ğŸ”µ GPT Models]
        C[Anthropic Claude<br/>ğŸŸ£ Claude API]
        D[Google Drive<br/>â˜ï¸ Documents]
        E[Redis Cache<br/>âš¡ Data Store]
    end
    
    subgraph "Test Doubles"
        F[Gemini Mock<br/>ğŸ­ Predefined Responses]
        G[OpenAI Stub<br/>ğŸ¤– Success/Failure Simulation]
        H[Claude Fake<br/>ğŸ‘» Latency Simulation]
        I[Drive Dummy<br/>ğŸ“ Static File Data]
        J[Redis Mock<br/>ğŸ’¾ In-memory Store]
    end
    
    subgraph "Test Scenarios"
        K[Fast Response<br/>âš¡ < 1s response]
        L[Slow Response<br/>ğŸŒ 30s+ response]
        M[Error Response<br/>âŒ API failures]
        N[Mixed Quality<br/>ğŸ“Š Varied confidence]
        O[Network Issues<br/>ğŸŒ Connection problems]
    end
    
    A --> F
    B --> G
    C --> H
    D --> I
    E --> J
    
    F --> K
    G --> L
    H --> M
    I --> N
    J --> O
```

### 9.3 å“è³ªä¿è¨¼ãƒ»Property-based Testing

#### Property-based ãƒ†ã‚¹ãƒˆè¨­è¨ˆ

```mermaid
graph TB
    subgraph "Properties to Test"
        A[Wall-Bounce Properties<br/>ğŸ¯ ä¿¡é ¼åº¦ãƒ»åˆæ„ã‚¹ã‚³ã‚¢ç¯„å›²]
        B[Response Properties<br/>ğŸ“ ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ãƒ»å®Œå…¨æ€§]
        C[Cache Properties<br/>âš¡ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ä¸€è²«æ€§ãƒ»TTL]
        D[Session Properties<br/>ğŸ‘¤ ã‚»ãƒƒã‚·ãƒ§ãƒ³æ•´åˆæ€§ãƒ»æœ‰åŠ¹æœŸé™]
    end
    
    subgraph "Generation Strategy"
        E[Input Generation<br/>ğŸ² ãƒ©ãƒ³ãƒ€ãƒ ãƒ»å¢ƒç•Œå€¤ãƒ»ç„¡åŠ¹å€¤]
        F[State Generation<br/>ğŸ”„ ã‚·ã‚¹ãƒ†ãƒ çŠ¶æ…‹ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³]
        G[Timing Generation<br/>â±ï¸ å®Ÿè¡Œã‚¿ã‚¤ãƒŸãƒ³ã‚°ãƒ»é †åº]
        H[Load Generation<br/>ğŸ“Š è² è·ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒ»ã‚¹ãƒ‘ã‚¤ã‚¯]
    end
    
    subgraph "Invariants"
        I[Response Time<br/>â° 60ç§’ä»¥å†…å®Œäº†ä¿è¨¼]
        J[Data Consistency<br/>ğŸ”„ ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ»DBæ•´åˆæ€§]
        K[Security<br/>ğŸ”’ èªè¨¼ãƒ»èªå¯ä¿æŒ]
        L[Resource Limits<br/>ğŸ’¾ ãƒ¡ãƒ¢ãƒªãƒ»CPUåˆ¶é™éµå®ˆ]
    end
    
    A --> E
    B --> F
    C --> G
    D --> H
    
    E --> I
    F --> J
    G --> K
    H --> L
```

### 9.4 CI/CD ãƒ†ã‚¹ãƒˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³

```mermaid
flowchart LR
    subgraph "Source Control"
        A[Git Push<br/>ğŸ“¤ Code Changes]
        B[PR Created<br/>ğŸ”€ Pull Request]
    end
    
    subgraph "CI Pipeline"
        C[Code Quality<br/>ğŸ” ESLint + TypeScript]
        D[Unit Tests<br/>âš™ï¸ Jest Test Suite]
        E[Integration Tests<br/>ğŸ”— API Testing]
        F[Security Scan<br/>ğŸ”’ Vulnerability Check]
    end
    
    subgraph "CD Pipeline"
        G[Build<br/>ğŸ—ï¸ TypeScript Compilation]
        H[Package<br/>ğŸ“¦ Docker Image]
        I[Deploy Staging<br/>ğŸ­ Test Environment]
        J[E2E Tests<br/>ğŸŒ Full Workflow]
    end
    
    subgraph "Production Deployment"
        K[Blue-Green Deploy<br/>ğŸ”„ Zero Downtime]
        L[Health Check<br/>ğŸ’“ Service Validation]
        M[Rollback Ready<br/>â†©ï¸ Quick Recovery]
    end
    
    A --> C
    B --> C
    C --> D
    D --> E
    E --> F
    F --> G
    G --> H
    H --> I
    I --> J
    J --> K
    K --> L
    L --> M
```

<div style="page-break-after: always;"></div>

## 10. ä»Šå¾Œã®ç™ºå±•è¨ˆç”»

### 10.1 ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—æ¦‚è¦

```mermaid
gantt
    title TechSapo Development Roadmap
    dateFormat  YYYY-MM-DD
    section Phase 1 (Q1 2025)
    èªè¨¼ãƒ»èªå¯å®Ÿè£…         :active, auth, 2025-01-01, 45d
    ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œå¼·åŒ–       :mobile, after auth, 30d
    ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–   :perf, after mobile, 30d
    
    section Phase 2 (Q2 2025)
    ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åˆ†å‰²   :micro, 2025-04-01, 60d
    Kuberneteså¯¾å¿œ        :k8s, after micro, 45d
    é«˜å¯ç”¨æ€§æ§‹æˆ          :ha, after k8s, 30d
    
    section Phase 3 (Q3 2025)
    AI/MLæ©Ÿèƒ½æ‹¡å¼µ         :ai, 2025-07-01, 75d
    å¤šè¨€èªå¯¾å¿œ            :i18n, after ai, 30d
    ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚ºæ©Ÿèƒ½   :enterprise, after i18n, 45d
    
    section Phase 4 (Q4 2025)
    ã‚°ãƒ­ãƒ¼ãƒãƒ«å±•é–‹        :global, 2025-10-01, 90d
```

### 10.2 çŸ­æœŸè¨ˆç”» (3ãƒ¶æœˆ)

#### èªè¨¼ãƒ»èªå¯ã‚·ã‚¹ãƒ†ãƒ 

```mermaid
graph TB
    subgraph "Authentication System"
        A[JWT Token Management<br/>ğŸ”‘ Secure Token Lifecycle]
        B[OAuth2 Integration<br/>ğŸŒ Google, GitHub, Microsoft]
        C[MFA Support<br/>ğŸ›¡ï¸ Two-Factor Authentication]
        D[Session Management<br/>ğŸ‘¤ Advanced User State]
    end
    
    subgraph "Authorization System"
        E[RBAC Implementation<br/>ğŸ‘¥ Role-Based Access Control]
        F[Permission Matrix<br/>ğŸ“‹ Fine-grained Permissions]
        G[API Key Management<br/>ğŸ—ï¸ Service-to-Service Auth]
        H[Audit Logging<br/>ğŸ“ Complete Access Trail]
    end
    
    subgraph "User Management"
        I[User Registration<br/>ğŸ“ Self-service Signup]
        J[Profile Management<br/>âš™ï¸ User Preferences]
        K[Organization Support<br/>ğŸ¢ Multi-tenant Architecture]
        L[Usage Analytics<br/>ğŸ“Š User Behavior Insights]
    end
```

#### ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œå¼·åŒ–

```mermaid
graph LR
    subgraph "Mobile Strategy"
        A[Progressive Web App<br/>ğŸ“± PWA Enhancement]
        B[Responsive Design<br/>ğŸ“ Mobile-first UI]
        C[Offline Support<br/>ğŸ”Œ Service Worker Cache]
        D[Push Notifications<br/>ğŸ”” Real-time Updates]
    end
    
    subgraph "Performance Optimization"
        E[Code Splitting<br/>ğŸ“¦ Lazy Loading]
        F[Image Optimization<br/>ğŸ–¼ï¸ WebP, Responsive Images]
        G[Bundle Optimization<br/>âš¡ Tree Shaking, Minification]
        H[Caching Strategy<br/>ğŸ’¾ Aggressive Client Caching]
    end
    
    subgraph "Native Features"
        I[Touch Gestures<br/>ğŸ‘† Swipe, Pinch, Tap]
        J[Device APIs<br/>ğŸ“² Camera, GPS, Sensors]
        K[App Install<br/>â¬‡ï¸ Add to Home Screen]
        L[Background Sync<br/>ğŸ”„ Offline-first Architecture]
    end
```

### 10.3 ä¸­æœŸè¨ˆç”» (6ãƒ¶æœˆ)

#### ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åˆ†å‰²æˆ¦ç•¥

```mermaid
graph TB
    subgraph "Service Decomposition"
        A[Wall-Bounce Service<br/>ğŸ¤– AI Orchestration<br/>ç‹¬ç«‹ãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½]
        B[RAG Service<br/>ğŸ“š Knowledge Management<br/>Vector Storeå°‚ç”¨]
        C[Session Service<br/>ğŸ‘¤ User State Management<br/>Redis Clusterå¯¾å¿œ]
        D[Analytics Service<br/>ğŸ“Š Metrics & Monitoring<br/>ãƒ‡ãƒ¼ã‚¿åˆ†æå°‚é–€]
    end
    
    subgraph "Inter-Service Communication"
        E[API Gateway<br/>ğŸŒ Unified Entry Point]
        F[Service Mesh<br/>ğŸ•¸ï¸ Istio/Linkerd]
        G[Message Queue<br/>ğŸ“¬ Async Communication]
        H[Event Sourcing<br/>ğŸ“š State Change Tracking]
    end
    
    subgraph "Data Management"
        I[Database per Service<br/>ğŸ’¾ Data Isolation]
        J[Shared Cache Layer<br/>âš¡ Redis Cluster]
        K[Event Store<br/>ğŸ“‹ Cross-service Events]
        L[Data Synchronization<br/>ğŸ”„ Eventual Consistency]
    end
```

#### Kuberneteså¯¾å¿œ

```mermaid
graph TB
    subgraph "Kubernetes Architecture"
        A[Namespace Isolation<br/>ğŸ·ï¸ Environment Separation]
        B[Pod Autoscaling<br/>ğŸ“ˆ HPA & VPA]
        C[Service Discovery<br/>ğŸ” DNS-based Routing]
        D[Config Management<br/>âš™ï¸ ConfigMaps & Secrets]
    end
    
    subgraph "Deployment Strategy"
        E[Helm Charts<br/>ğŸ“¦ Package Management]
        F[GitOps Workflow<br/>ğŸ”„ ArgoCD/Flux]
        G[Blue-Green Deployment<br/>ğŸ”„ Zero Downtime]
        H[Canary Releases<br/>ğŸ¤ Gradual Rollout]
    end
    
    subgraph "Observability"
        I[Prometheus Stack<br/>ğŸ“Š Metrics Collection]
        J[Jaeger Tracing<br/>ğŸ” Distributed Tracing]
        K[ELK Stack<br/>ğŸ“ Log Aggregation]
        L[Grafana Dashboards<br/>ğŸ“ˆ Visualization]
    end
```

### 10.4 é•·æœŸè¨ˆç”» (12ãƒ¶æœˆ)

#### AI/MLæ©Ÿèƒ½æ‹¡å¼µ

```mermaid
mindmap
  root((AI/ML Enhancement))
    Advanced Models
      GPT-5 Integration
      Gemini 3.0 Support
      Claude 4 Integration
      Custom Fine-tuning
    Intelligent Features
      Predictive Analytics
      Anomaly Detection
      Auto-categorization
      Smart Recommendations
    ML Pipeline
      Data Pipeline
      Model Training
      A/B Testing
      Performance Monitoring
    Edge AI
      Local Model Deployment
      Federated Learning
      Privacy-preserving ML
      Real-time Inference
```

#### ã‚°ãƒ­ãƒ¼ãƒãƒ«å±•é–‹æˆ¦ç•¥

```mermaid
graph TB
    subgraph "Multi-Region Architecture"
        A[US-East (Primary)<br/>ğŸ‡ºğŸ‡¸ Virginia DC]
        B[EU-West (Secondary)<br/>ğŸ‡ªğŸ‡º Frankfurt DC]
        C[APAC (Tertiary)<br/>ğŸŒ Tokyo DC]
        D[Global CDN<br/>ğŸŒ Edge Locations]
    end
    
    subgraph "Localization"
        E[Multi-language Support<br/>ğŸŒ i18n Framework]
        F[Regional Compliance<br/>ğŸ“‹ GDPR, CCPA, etc.]
        G[Local Data Residency<br/>ğŸ  Data Sovereignty]
        H[Currency Support<br/>ğŸ’° Multi-currency Billing]
    end
    
    subgraph "Performance Optimization"
        I[Geo-routing<br/>ğŸ—ºï¸ Closest DC Routing]
        J[Data Replication<br/>ğŸ“‹ Cross-region Sync]
        K[Edge Computing<br/>âš¡ CDN-based Processing]
        L[Latency Optimization<br/>â±ï¸ Sub-100ms Response]
    end
    
    subgraph "Operational Excellence"
        M[24/7 Support<br/>ğŸ• Follow-the-sun Model]
        N[Regional Teams<br/>ğŸ‘¥ Local Expertise]
        O[Compliance Automation<br/>ğŸ¤– Regulatory Adherence]
        P[Cost Optimization<br/>ğŸ’° Multi-cloud Strategy]
    end
```

### 10.5 æŠ€è¡“é©æ–°ãƒ»ç ”ç©¶é–‹ç™º

#### æ–°æŠ€è¡“èª¿æŸ»ãƒ»å®Ÿé¨“

```mermaid
flowchart LR
    subgraph "Emerging Technologies"
        A[WebAssembly<br/>âš¡ High-performance Computing]
        B[GraphQL Federation<br/>ğŸ•¸ï¸ Unified API Layer]
        C[Serverless Architecture<br/>â˜ï¸ Function-as-a-Service]
        D[Quantum Computing<br/>ğŸ”¬ Future AI Acceleration]
    end
    
    subgraph "AI/ML Innovations"
        E[Multimodal AI<br/>ğŸ­ Text, Image, Audio]
        F[Federated Learning<br/>ğŸ” Privacy-preserving ML]
        G[AutoML<br/>ğŸ¤– Automated Model Selection]
        H[Neural Architecture Search<br/>ğŸ§  Optimal Model Design]
    end
    
    subgraph "Infrastructure Evolution"
        I[Edge Computing<br/>ğŸ“ Distributed Processing]
        J[5G Integration<br/>ğŸ“¶ Ultra-low Latency]
        K[Sustainable Computing<br/>ğŸŒ± Green Technology]
        L[Quantum Security<br/>ğŸ”’ Post-quantum Cryptography]
    end
```

---

<div style="page-break-after: always;"></div>

## ä»˜éŒ²

### A. æŠ€è¡“é¸å®šç†ç”±è©³ç´°

| æŠ€è¡“ | é¸å®šç†ç”± | ä»£æ›¿æ¡ˆ | è©•ä¾¡åŸºæº– |
|------|----------|-------|----------|
| **TypeScript** | å‹å®‰å…¨æ€§ã€é–‹ç™ºåŠ¹ç‡å‘ä¸Šã€å¤§è¦æ¨¡é–‹ç™ºå¯¾å¿œ | JavaScript, Flow | å‹ã‚·ã‚¹ãƒ†ãƒ ã€ãƒ„ãƒ¼ãƒ«ã€ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ |
| **Express.js** | æˆç†Ÿã—ãŸã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã€è»½é‡ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºæ€§ | Fastify, Koa, NestJS | ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã€å­¦ç¿’ã‚³ã‚¹ãƒˆã€æ‹¡å¼µæ€§ |
| **Redis** | é«˜é€Ÿã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€è±Šå¯Œãªãƒ‡ãƒ¼ã‚¿æ§‹é€ ã€ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼å¯¾å¿œ | Memcached, Hazelcast | é€Ÿåº¦ã€æ©Ÿèƒ½ã€ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£ |
| **Jest** | è±Šå¯Œãªæ©Ÿèƒ½ã€å„ªç§€ãªãƒ¢ãƒƒã‚¯å¯¾å¿œã€TypeScriptçµ±åˆ | Mocha, Vitest, Cypress | ãƒ†ã‚¹ãƒˆæ©Ÿèƒ½ã€é–‹ç™ºä½“é¨“ã€CI/CDçµ±åˆ |
| **Prometheus** | æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€è±Šå¯Œãªã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ  | InfluxDB, Datadog | ç›£è¦–æ©Ÿèƒ½ã€ã‚³ã‚¹ãƒˆã€é‹ç”¨æ€§ |

### B. ç”¨èªé›†

| ç”¨èª | å®šç¾© | è‹±èª |
|------|------|------|
| **Wall-Bounce** | è¤‡æ•°LLMãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã«ã‚ˆã‚‹ç›¸äº’æ¤œè¨¼æŠ€è¡“ | Multi-LLM Cross-validation |
| **RAG** | æ¤œç´¢æ‹¡å¼µç”Ÿæˆï¼šå¤–éƒ¨çŸ¥è­˜ã‚’æ´»ç”¨ã—ãŸAIç”ŸæˆæŠ€è¡“ | Retrieval-Augmented Generation |
| **Vector Store** | ãƒ™ã‚¯ãƒˆãƒ«åŒ–ã•ã‚ŒãŸæ–‡æ›¸ã‚’åŠ¹ç‡çš„ã«ä¿å­˜ãƒ»æ¤œç´¢ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ  | Vector Database |
| **SSE** | ã‚µãƒ¼ãƒãƒ¼ä¸»å°ã§ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹æŠ€è¡“ | Server-Sent Events |
| **Consensus** | è¤‡æ•°ã®AIå¿œç­”ã‹ã‚‰åˆæ„ã‚¹ã‚³ã‚¢ã‚’ç®—å‡ºã™ã‚‹å“è³ªè©•ä¾¡æŒ‡æ¨™ | Consensus Score |
| **Provider** | OpenAIã€Googleã€Anthropicãªã©ã®å¤–éƒ¨LLMã‚µãƒ¼ãƒ“ã‚¹ | LLM Provider |
| **MCP** | ãƒ¢ãƒ‡ãƒ«é–“é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«ï¼šAI ã‚µãƒ¼ãƒ“ã‚¹é–“ã®æ¨™æº–åŒ–ã•ã‚ŒãŸé€šä¿¡æ–¹å¼ | Model Context Protocol |

### C. è¨­å®šä¾‹ãƒ»ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

#### ç’°å¢ƒå¤‰æ•°è¨­å®šä¾‹
```bash
# Server Configuration
NODE_ENV=production
PORT=4000
LOG_LEVEL=info

# Wall-Bounce Configuration
WALL_BOUNCE_ENABLE_FALLBACK=true
WALL_BOUNCE_ENABLE_TIMEOUT=true
WALL_BOUNCE_TIMEOUT_MS=60000
WALL_BOUNCE_MIN_PROVIDERS=2

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0

# LLM Provider Configuration (if needed)
OPENAI_API_KEY=your_openai_key
GOOGLE_CLIENT_ID=your_google_client_id
ANTHROPIC_API_KEY=your_anthropic_key
```

#### Docker Composeè¨­å®šä¾‹
```yaml
version: '3.8'
services:
  techsapo:
    build: .
    ports:
      - "4000:4000"
    environment:
      - NODE_ENV=production
      - REDIS_HOST=redis
    depends_on:
      - redis
  
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
  
  prometheus:
    image: prom/prometheus
    ports:
      - "9090:9090"
    volumes:
      - ./prometheus.yml:/etc/prometheus/prometheus.yml

volumes:
  redis_data:
```

---

**ä½œæˆæ—¥**: 2025-09-28  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 2.0  
**æ‰¿èªè€…**: TechSapoé–‹ç™ºãƒãƒ¼ãƒ   
**æ¬¡å›ãƒ¬ãƒ“ãƒ¥ãƒ¼**: 2025-12-28