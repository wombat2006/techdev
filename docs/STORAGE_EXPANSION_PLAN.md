# ðŸ’¾ ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å¢—è¨­è¨ˆç”»

## ðŸ“Š ç¾åœ¨ã®ä½¿ç”¨çŠ¶æ³

### ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨çŽ‡
```
Filesystem        Size  Used Avail Use% Mounted on
/dev/nvme0n1p1    8.0G  7.6G  401M  96% /     (ãƒ«ãƒ¼ãƒˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³)
/dev/nvme2n1       15G  6.6G  8.4G  45% /ai   (ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé ˜åŸŸ)
/dev/nvme3n1       10G  5.3G  4.7G  54% /data (ãƒ‡ãƒ¼ã‚¿é ˜åŸŸ)
```

### ä¸»è¦ãªä½¿ç”¨å†…è¨³

#### /ai ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª (10GBä¸­6.6GBä½¿ç”¨)
```
ç·ä½¿ç”¨é‡: 10GB
â”œâ”€â”€ TechSapoé–¢é€£ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: 1.3GB
â”‚   â”œâ”€â”€ /ai/prj/techdev: 666MB
â”‚   â”œâ”€â”€ /ai/prj/techsapo-prod: 9.6MB (æœ¬ç•ªç’°å¢ƒ)
â”‚   â””â”€â”€ /ai/prj/techsapo: 566MB
â”œâ”€â”€ ãã®ä»–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ: 8.7GB
â”‚   â”œâ”€â”€ claude-code-webui: 2.1GB
â”‚   â”œâ”€â”€ tech-helper: 1.8GB
â”‚   â”œâ”€â”€ wall-bounce-tech-support-helper: 666MB
â”‚   â””â”€â”€ ãã®ä»–: 4.2GB
```

#### Node.jsä¾å­˜é–¢ä¿‚ã®å¤§å®¹é‡åŒ–
```
node_modules ä½¿ç”¨é‡:
â”œâ”€â”€ techdev: 566MB
â”œâ”€â”€ techsapo: 566MB
â”œâ”€â”€ techsapo-devel: 124MB
â”œâ”€â”€ claude-code-webui: 350MB (client) + 108MB (server) + 723MB (cipher)
â”œâ”€â”€ tech-helper: 380MB + 65MB (cipher)
â””â”€â”€ ãã®ä»–: åˆè¨ˆç´„300MB
```

### âš ï¸ å•é¡Œç‚¹

1. **ãƒ«ãƒ¼ãƒˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³é€¼è¿«** (96%ä½¿ç”¨)
   - ã‚·ã‚¹ãƒ†ãƒ å‹•ä½œã«æ”¯éšœã‚’ããŸã™å¯èƒ½æ€§
   - ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã€ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãè¾¼ã¿åˆ¶é™

2. **é‡è¤‡ã™ã‚‹ä¾å­˜é–¢ä¿‚**
   - åŒã˜node_modulesãŒè¤‡æ•°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å­˜åœ¨
   - ç‰¹ã«Cipheré–¢é€£ã§å¤§å®¹é‡ã®é‡è¤‡

3. **æœ¬ç•ªç’°å¢ƒã®ãƒªã‚¹ã‚¯**
   - æœ¬ç•ªç’°å¢ƒç”¨ã®æ›¸ãè¾¼ã¿å¯èƒ½é ˜åŸŸ `/var/techsapo` ã®ç¢ºä¿ãŒå›°é›£

## ðŸ“ˆ å¿…è¦å®¹é‡ã®ç®—å‡º

### çŸ­æœŸçš„éœ€è¦ (3ãƒ¶æœˆ)
```
ç¾åœ¨ã®ä½¿ç”¨é‡: 15.1GB (/ai: 10GB + /data: 5.1GB)
æƒ³å®šã•ã‚Œã‚‹å¢—åŠ :
â”œâ”€â”€ æœ¬ç•ªç’°å¢ƒã®é‹ç”¨ãƒ‡ãƒ¼ã‚¿: 2GB
â”‚   â”œâ”€â”€ /var/techsapo/logs: 500MB
â”‚   â”œâ”€â”€ /var/techsapo/session: 200MB
â”‚   â”œâ”€â”€ /var/techsapo/cache: 300MB
â”‚   â””â”€â”€ /var/techsapo/tmp: 1GB
â”œâ”€â”€ é–‹ç™ºç’°å¢ƒã®æ‹¡å¼µ: 3GB
â”‚   â”œâ”€â”€ æ–°è¦MCPå®Ÿè£…: 1GB
â”‚   â”œâ”€â”€ ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿: 1GB
â”‚   â””â”€â”€ ãƒ“ãƒ«ãƒ‰æˆæžœç‰©: 1GB
â”œâ”€â”€ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—é ˜åŸŸ: 2GB
â””â”€â”€ å®‰å…¨ãƒžãƒ¼ã‚¸ãƒ³: 3GB
---
å¿…è¦ç·å®¹é‡: 25GB
```

### ä¸­æœŸçš„éœ€è¦ (1å¹´)
```
çŸ­æœŸéœ€è¦: 25GB
è¿½åŠ è¦æ±‚:
â”œâ”€â”€ è¤‡æ•°ç’°å¢ƒå¯¾å¿œ: 5GB
â”‚   â”œâ”€â”€ ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ³ã‚°ç’°å¢ƒ: 2GB
â”‚   â”œâ”€â”€ ãƒ†ã‚¹ãƒˆç’°å¢ƒ: 2GB
â”‚   â””â”€â”€ ãƒ‡ãƒ¢ç’°å¢ƒ: 1GB
â”œâ”€â”€ ãƒ­ã‚°ãƒ»ãƒ¡ãƒˆãƒªã‚¯ã‚¹è“„ç©: 3GB
â”œâ”€â”€ CI/CDã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ: 2GB
â””â”€â”€ å®‰å…¨ãƒžãƒ¼ã‚¸ãƒ³: 5GB
---
å¿…è¦ç·å®¹é‡: 40GB
```

## ðŸ”§ å¢—è¨­è¨ˆç”»

### Phase 1: ç·Šæ€¥å¯¾å¿œ (å³æ™‚å®Ÿè¡Œ)

#### 1. ãƒ«ãƒ¼ãƒˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³å®¹é‡ç¢ºä¿
```bash
# ä¸è¦ãªãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤
sudo apt clean                           # ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚­ãƒ£ãƒƒã‚·ãƒ¥å‰Šé™¤
sudo journalctl --vacuum-time=7d         # å¤ã„ãƒ­ã‚°å‰Šé™¤
docker system prune -af                  # Dockerä¸è¦ãƒ‡ãƒ¼ã‚¿å‰Šé™¤ (åˆ©ç”¨ã—ã¦ã„ã‚‹å ´åˆ)

# æœŸå¾…å‰Šæ¸›å®¹é‡: 500MB-1GB
```

#### 2. é‡è¤‡ä¾å­˜é–¢ä¿‚ã®æœ€é©åŒ–
```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçµ±åˆãƒ»æ•´ç†
cd /ai/prj
rm -rf techsapo/node_modules            # é‡è¤‡å‰Šé™¤
ln -s techdev/node_modules techsapo/    # ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ä½œæˆ

# æœŸå¾…å‰Šæ¸›å®¹é‡: 566MB
```

#### 3. /ai ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ‹¡å¼µ
```bash
# ç¾åœ¨: 15GB â†’ ç›®æ¨™: 25GB (10GBå¢—è¨­)
# AWS EBS ãƒœãƒªãƒ¥ãƒ¼ãƒ æ‹¡å¼µ
aws ec2 modify-volume --volume-id vol-xxxxx --size 25

# ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ æ‹¡å¼µ
sudo growpart /dev/nvme2n1 1
sudo resize2fs /dev/nvme2n1
```

### Phase 2: æœ¬ç•ªç’°å¢ƒå¯¾å¿œ (1é€±é–“ä»¥å†…)

#### 1. å°‚ç”¨æ›¸ãè¾¼ã¿é ˜åŸŸã®ä½œæˆ
```bash
# /var/techsapo ç”¨ã«æ–°ã—ã„ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ä½œæˆ
sudo mkdir -p /var/techsapo
sudo mount /dev/nvme4n1 /var/techsapo    # æ–°è¦EBSãƒœãƒªãƒ¥ãƒ¼ãƒ 
sudo chown -R techsapo:techsapo /var/techsapo
sudo chmod -R 755 /var/techsapo
```

#### 2. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥
```bash
# è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
cat > /ai/prj/scripts/backup-storage.sh << 'EOF'
#!/bin/bash
BACKUP_DIR="/data/backup/$(date +%Y%m%d)"
mkdir -p "$BACKUP_DIR"

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚³ãƒ¼ãƒ‰ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
tar czf "$BACKUP_DIR/projects.tar.gz" /ai/prj/techdev /ai/prj/techsapo-prod

# è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
tar czf "$BACKUP_DIR/configs.tar.gz" ~/.claude.json ~/.codex/

# å¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å‰Šé™¤ (30æ—¥ä»¥ä¸Š)
find /data/backup -type d -mtime +30 -exec rm -rf {} +
EOF

chmod +x /ai/prj/scripts/backup-storage.sh
```

### Phase 3: æœ€é©åŒ– (1ãƒ¶æœˆä»¥å†…)

#### 1. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸éšŽå±¤åŒ–
```
é«˜é€Ÿã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ (SSD):
â”œâ”€â”€ /ai/prj/techdev (é–‹ç™ºç’°å¢ƒ)
â”œâ”€â”€ /ai/prj/techsapo-prod (æœ¬ç•ªç’°å¢ƒ)
â””â”€â”€ /var/techsapo (æœ¬ç•ªæ›¸ãè¾¼ã¿é ˜åŸŸ)

æ¨™æº–ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ (GP2):
â”œâ”€â”€ /data (å„ç¨®ãƒ‡ãƒ¼ã‚¿)
â”œâ”€â”€ ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
â””â”€â”€ ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–

ä½Žé€Ÿã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ (SC1):
â”œâ”€â”€ é•·æœŸãƒ­ã‚°ä¿ç®¡
â””â”€â”€ éžã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
```

#### 2. è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
```bash
# å®šæœŸã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
cat > /ai/prj/scripts/storage-cleanup.sh << 'EOF'
#!/bin/bash

# ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«æ•´ç† (30æ—¥ä»¥ä¸Šå‰Šé™¤)
find /var/techsapo/logs -name "*.log" -mtime +30 -delete

# ä¸€æ™‚ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ (7æ—¥ä»¥ä¸Š)
find /var/techsapo/tmp -type f -mtime +7 -delete

# ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ (1æ—¥ä»¥ä¸Š)
find /var/techsapo/session -type f -mtime +1 -delete

# node_modulesæœ€é©åŒ–
npm cache clean --force
npx yarn cache clean
EOF

# crontabã«ç™»éŒ²
echo "0 2 * * * /ai/prj/scripts/storage-cleanup.sh" | crontab -
```

## ðŸ’° ã‚³ã‚¹ãƒˆè¦‹ç©ã‚‚ã‚Š

### AWS EBSè¿½åŠ ã‚³ã‚¹ãƒˆ
```
Phase 1: /ai æ‹¡å¼µ (15GB â†’ 25GB)
â””â”€â”€ è¿½åŠ 10GB Ã— $0.10/GB/æœˆ = $1.00/æœˆ

Phase 2: æœ¬ç•ªæ›¸ãè¾¼ã¿ç”¨ (æ–°è¦5GB)
â””â”€â”€ 5GB Ã— $0.10/GB/æœˆ = $0.50/æœˆ

Phase 3: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ç”¨ (æ–°è¦10GB)
â””â”€â”€ 10GB Ã— $0.10/GB/æœˆ = $1.00/æœˆ

æœˆé¡åˆè¨ˆè¿½åŠ ã‚³ã‚¹ãƒˆ: $2.50
å¹´é¡åˆè¨ˆè¿½åŠ ã‚³ã‚¹ãƒˆ: $30.00
```

## ðŸ“… å®Ÿè¡Œã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

### Week 1: ç·Šæ€¥å¯¾å¿œ
- [ ] Day 1: ä¸è¦ãƒ•ã‚¡ã‚¤ãƒ«å‰Šé™¤ãƒ»é‡è¤‡æ•´ç†
- [ ] Day 2: /ai ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³æ‹¡å¼µ
- [ ] Day 3: å‹•ä½œç¢ºèªãƒ»ç›£è¦–è¨­å®š

### Week 2: æœ¬ç•ªå¯¾å¿œ
- [ ] Day 8: æœ¬ç•ªæ›¸ãè¾¼ã¿é ˜åŸŸä½œæˆ
- [ ] Day 9: ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½“åˆ¶æ§‹ç¯‰
- [ ] Day 10: æœ¬ç•ªç’°å¢ƒãƒ†ã‚¹ãƒˆ

### Week 3-4: æœ€é©åŒ–
- [ ] Day 15: ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸éšŽå±¤åŒ–å®Ÿè£…
- [ ] Day 20: è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—è¨­å®š
- [ ] Day 25: ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆå®Œæˆ
- [ ] Day 30: é‹ç”¨æ‰‹é †æ›¸å®Œæˆ

## ðŸ” ç›£è¦–ãƒ»ã‚¢ãƒ©ãƒ¼ãƒˆ

### å®¹é‡ç›£è¦–ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
```bash
#!/bin/bash
# /ai/prj/scripts/storage-monitor.sh

THRESHOLD=80  # 80%ä»¥ä¸Šã§è­¦å‘Š

df -h | while read filesystem size used avail use mountpoint; do
    if [[ $use =~ ^[0-9]+% ]]; then
        usage=${use%\%}
        if [[ $usage -gt $THRESHOLD ]]; then
            echo "WARNING: $mountpoint is ${usage}% full"
            logger "Storage warning: $mountpoint at ${usage}%"
        fi
    fi
done
```

### è‡ªå‹•ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š
```bash
# crontabã«è¿½åŠ 
*/30 * * * * /ai/prj/scripts/storage-monitor.sh
```

## ðŸŽ¯ æˆåŠŸæŒ‡æ¨™

- âœ… ãƒ«ãƒ¼ãƒˆãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ä½¿ç”¨çŽ‡ < 70%
- âœ… /ai ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ä½¿ç”¨çŽ‡ < 60%
- âœ… æœ¬ç•ªç’°å¢ƒã®å®‰å®šå‹•ä½œ
- âœ… ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å®Œå…¨æ€§ 100%
- âœ… ã‚³ã‚¹ãƒˆäºˆç®—å†…åŽæŸ ($30/å¹´ä»¥ä¸‹)

ã“ã®è¨ˆç”»ã«ã‚ˆã‚Šã€è«–ç†åˆ†é›¢ã‚’ç¶­æŒã—ãªãŒã‚‰ååˆ†ãªã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸å®¹é‡ã‚’ç¢ºä¿ã—ã€å®‰å…¨ã§æŒç¶šå¯èƒ½ãªé‹ç”¨ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚